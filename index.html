<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="stylesheet" href="assets/css/reset.css">
		<link rel="stylesheet" href="assets/css/style.css">
		<title>Star Wars RPG</title>
	</head>
	<body>
		<canvas id="starfield"></canvas>
		<div id="wrapper">
			<div id="screen">
				<h1>Star Wars RPG</h1>
			</div>
		</div>

		<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha384-xBuQ/xzmlsLoJpyjoggmTEz8OWUFM0/RC5BsqQBDX2v5cMvDHcMakNTNrHIW2I5f" crossorigin="anonymous"></script>
		<script src="assets/js/starfield.js" charset="utf-8"></script>
		<script src="assets/js/game.js" charset="utf-8"></script>
		<script type="text/javascript">
		var starfieldCanvas = $("#starfield")[0];
		var starfield;
		var luke, leia, trooper, vader;

		// var lastFrame = Date.now();
		function drawScreen() {
			starfield.draw();
			// var delta = Date.now() - lastFrame;
			// lastFrame += delta;
			// console.log(delta);
			// requestAnimationFrame(drawScreen);
		}

		$(document).ready(function() {
			starfieldCanvas.width = document.body.clientWidth;
			starfieldCanvas.height = document.body.clientHeight;
			starfield = new Starfield(starfieldCanvas);

			luke = new Character("luke", "Luke Skywalker", "Lightsaber", 4, 90);
			leia = new Character("leia", "Princess Leia Organa", "Blaster", 8, 130);
			trooper = new Character("trooper", "Startrooper XJ-72", "Blaster", 12, 140);
			vader = new Character("vader", "Darth Vader", "Lightsaber", 16, 310);

			$("#screen").append(CharacterView(luke));
			$("#screen").append(CharacterView(leia));
			$("#screen").append(CharacterView(trooper));
			$("#screen").append(CharacterView(vader));

			$("<div>").addClass("clear").appendTo($("#screen"));

			drawScreen();
		});

		// var lastResize = Date.now();
		$(window).resize(function() {
			// var delta = Date.now() - lastResize;
			// console.log(delta);
			// lastResize += delta;
			starfieldCanvas.width = document.body.clientWidth;
			starfieldCanvas.height = document.body.clientHeight;
			starfield.draw();
		});
		</script>
	</body>
</html>
